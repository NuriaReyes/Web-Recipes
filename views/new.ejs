<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Nueva Receta</title>

    <link href="/Bootstrap/css/bootstrap.css" rel="stylesheet">
    <!-- <link href="/Bootstrap/css/custom.css" rel="stylesheet"> -->

  </head>
  <body>

    <% include navbar %>

    <% if (typeof error !== 'undefined') { %>
      <div class="col-md-offset-3 col-md-6">
          <div class="alert alert-dismissible alert-warning">
              <button type="button" class="close" data-dismiss="alert">×</button>
              <strong><%= error %></strong>
          </div>
      </div>
    <% } else if (typeof success !== 'undefined') { %>
      <div class="col-md-offset-3 col-md-6">
          <div class="alert alert-dismissible alert-success">
              <button type="button" class="close" data-dismiss="alert">×</button>
              <strong><%= success %></strong>
          </div>
      </div>
    <% } %>

    <div class="container col-md-offset-2 col-md-8">
      <form class="form-horizontal" method="post">
        <fieldset>
          <legend>Registrar Nueva Receta</legend>

          <div class="form-group">
            <label class="col-md-2 control-label">Nombre de receta: </label>
            <div class="col-md-10">
              <input type="text" class="form-control" placeholder="Escriba nombre..." name="name">
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-2 control-label">Ingredientes: </label>
            <div class="col-md-10">
              <p onclick="drawIngredients()" class="btn btn-link">+</p>
            </div>
          </div>

          <div id="ingredientsList">
            <!-- autogenerated code -->
          </div>

          <div class="form-group">
            <label class="col-md-2 control-label">Pasos a seguir: </label>
            <div class="col-md-10">
              <p onclick="drawSteps()" class="btn btn-link">+</p>
            </div>
          </div>

          <div id="stepsList">
            <!-- autogenerated code -->
          </div>

          <div class="form-group">
            <div class="col-md-offset-5 col-md-2">
              <button formaction="/recipe/save" type="submit" class="btn btn-primary">Guardar Receta</button>
            </div>
          </div>

      </form>
    </div>


    <script>
      var i = 0;
      var ingredientsContainer = document.getElementById('ingredientsList');
      var drawIngredients = function(){
        var nodeIng = document.createElement("DIV");
        nodeIng.innerHTML =
        `<div class="form-group" id="ingredient_${i}">
            <div class="col-md-2">
              <input type="text" class="form-control" placeholder="Cantidad" name="iQuantity_${i}">
            </div>
            <div class="col-md-3">
              <select class="form-control" name="iMeasurementType_${i}">
                <option value="">-- Medida --</option>
                <option value="lt">lt</option>
                <option value="ml">ml</option>
                <option value="oz">oz</option>
                <option value="tazas">tazas</option>
                <option value="cucharaditas">cucharaditas</option>
                <option value="cucharadas">cucharadas</option>
                <option value="pizca">pizca</option>
                <option value="piezas">piezas</option>
              </select>
            </div>
            <div class="col-md-7">
              <input type="text" class="form-control" placeholder="Nombre de ingrediente" name="iName_${i}">
            </div>
          </div>`;
        ingredientsContainer.appendChild(nodeIng);
          i++;
        }
        drawIngredients();
    </script>

    <script>
      var j = 0;
      var stepsContainer = document.getElementById('stepsList');
      var drawSteps = function(){
        var nodeSteps = document.createElement("DIV");
        nodeSteps.innerHTML =
        `<div class="form-group" id="step_${j}">
            <div class="col-md-2">
              <input type="text" class="form-control" placeholder="No." name="sNumber_${j}">
            </div>
            <div class="col-md-10">
              <input type="text" class="form-control" placeholder="Describa paso" name="sDirections_${j}">
            </div>
          </div>`;
        stepsContainer.appendChild(nodeSteps);
          j++;
        }
        drawSteps();
    </script>

    <script src="/Bootstrap/js/jquery.min.js"></script>
    <script src="/Bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
