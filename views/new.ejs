<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Nueva Receta</title>

    <link href="/Bootstrap/css/bootstrap.css" rel="stylesheet">
    <!-- <link href="/Bootstrap/css/custom.css" rel="stylesheet"> -->

  </head>
  <body>

    <% include navbar %>

    <div class="container col-md-8 col-md-offset-2">
      <div class="panel panel-default">
        <div class="panel-body">

          <form class="form-horizontal" method="post">
            <fieldset>
              <div class="col-md-10 col-md-offset-1">
                <legend><center>Registrar Nueva Receta</center></legend>
              </div>

              <div class="form-group">
                <div class="col-md-8 col-md-offset-2">
                  <label class="control-label" for="name">Nombre de receta: </label>
                  <input type="text" class="form-control" placeholder="Escriba nombre..." name="name" id="name">
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-8 col-md-offset-2">
                  <label class="control-label" for="type">Tipo de platillo: </label>
                  <select class="form-control" name="type">
                    <option value="Ensaladas">Ensaladas</option>
                    <option value="Platos fuertes">Platos fuertes</option>
                    <option value="Sopas">Sopas</option>
                    <option value="Postres">Postres</option>
                    <option value="Snacks">Snacks</option>
                    <option value="Bebidas">Bebidas</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-8 col-md-offset-2">
                  <a><span onclick="drawIngredients()" class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></a>
                  <a><span onclick="eraseIngredients()" class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></a>
                  <label class="control-label">Ingredientes: </label>
                </div>
              </div>

              <div class="col-md-8 col-md-offset-2">
                <div id="ingredientsList">
                  <!-- autogenerated code -->
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-8 col-md-offset-2">
                  <a><span onclick="drawSteps()" class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span></a>
                  <a><span onclick="eraseSteps()" class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></a>
                  <label class="control-label">Instrucciones: </label>
                </div>
              </div>

              <div class="col-md-8 col-md-offset-2">
                <div id="stepsList">
                  <!-- autogenerated code -->
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-offset-5 col-md-2">
                  <button formaction="/recipe/save" type="submit" class="btn btn-primary">Guardar Receta</button>
                </div>
              </div>
            </fieldset>
          </form>

        </div>
      </div>
    </div>


    <script>
      var i = 0;
      var ingredientsContainer = document.getElementById('ingredientsList');
      var drawIngredients = function(){
        var nodeIng = document.createElement("DIV");
        nodeIng.innerHTML =
          `<div class="form-group" id="ingredient_${i}">
              <input type="text" class="form-control" placeholder="Ingrediente..." name="ing_${i}" onkeypress="return drawIng(event)">
          </div>`;
        ingredientsContainer.appendChild(nodeIng);
          i++;
      }
      var drawIng = function(e){
        if(e.keyCode == 13){
          drawIngredients();
          return false;
        }
      }
      var eraseIngredients = function(){
        if(i > 1){
          i--;
          console.log(i);
          var ingredient = document.getElementById('ingredient_' + i);
          ingredient.parentNode.removeChild(ingredient);
        }
      }
      drawIngredients();
    </script>

    <script>
      var j = 1;
      var stepsContainer = document.getElementById('stepsList');
      var drawSteps = function(){
        var nodeSteps = document.createElement("DIV");
        nodeSteps.innerHTML =
        `<div class="form-group" id="step_${j}">
            Paso ${j}
            <input type="text" class="form-control" placeholder="Describa paso" name="sDirections_${j}" onkeypress="return drawSt(event)">
          </div>`;
        stepsContainer.appendChild(nodeSteps);
          j++;
      }
      var drawSt = function(e){
        if(e.keyCode == 13){
          drawSteps();
          return false;
        }
      }
      var eraseSteps = function(){
        if(j > 2){
          j--;
          console.log(j);
          var step = document.getElementById('step_' + j);
          step.parentNode.removeChild(step);
        }
      }
        drawSteps();
    </script>

    <script src="/Bootstrap/js/jquery.min.js"></script>
    <script src="/Bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>
